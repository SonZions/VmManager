<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Azure VM Manager</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding-top: 30px; }
        button { font-size: 1.2em; margin: 10px; padding: 10px 20px; }
        pre { text-align: left; background: #eee; padding: 20px; overflow-x: auto; max-width: 80%; margin: auto; white-space: pre-wrap; }
    </style>
</head>
<body>
    <h1>Azure VM Manager</h1>

    {% if public_ip %}
        <p style="color:green;">âœ… VM laÌˆuft: {{ public_ip }}</p>
        <p>Verbinde: <strong>mstsc /v:{{ public_ip }}</strong></p>
    {% else %}
        <p style="color:red;">â›” VM ist gestoppt</p>
    {% endif %}
    
     <h3>Aktive Ressourcen</h3>
 <div id="resources">Lade...</div>

 <script>
 fetch("/resources")
     .then(response => response.json())
     .then(data => {
         const list = data.map(r => <li><b>${r.name}</b> (${r.type}) â€“ ${r.location}</li>`).join("");
         document.getElementById("resources").innerHTML = `<ul>${list}</ul>`;
     })
     .catch(err => {
         document.getElementById("resources").innerHTML = "Fehler beim Laden der Ressourcen.";
     });
 </script>

    <form action="/start" method="post">
        <button type="submit">ðŸ”µ VM starten</button>
    </form>

    <form action="/stop" method="post">
        <button type="submit">ðŸ”´ VM stoppen</button>
    </form>
    
    <form action="/clear-log" method="post">
        <button type="submit">ðŸ§¹ Log loÌˆschen</button>
    </form>

    <h2>Logs</h2>
    <pre id="logbox">Lade...</pre>

    <script>
        function reloadLogs() {
            fetch("/logs")
                .then(response => response.text())
                .then(data => {
                    document.getElementById("logbox").innerText = data;
                });
        }
        setInterval(reloadLogs, 1500);
        reloadLogs();
    </script>
</body>
</html>
